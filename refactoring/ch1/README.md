# 리팩터링: 첫 번째 예시

원칙은 지나치게 일반화되기 쉬워서 실제 적용 방법을 파악하기 어렵지만 예시가 있으면 모든 것이 명확해진다. → 작가가 예시 위주로 책의 진도를 나아간다고 함

항시 책의 예시들이 대규모 시스템에서 발췌한 코드라고 상상하면서 따라오기 바란다.

## 1.1 시작해보자!

극단에서 클라이언트의 요청에 대한 청구서를 발급해주는 프로그램

## 1.2 예시 프로그램을 본 소감

- 컴파일러는 코드가 깔끔하든 지저분하든 개의치않지만, 그 코드를 수정하려면 사람이 개입되고, 사람은 코드의 미적 상태에 민감하다. 그래서 설계가 나쁜 시스템은 수정하기가 어렵다.
- 프로그램이 새로운 기능을 추가하기에 편한 구조가 아니라면, 먼저 기능을 추가하기 쉬운 형태로 리팩터링하고 나서 원하는 기능을 추가한다.
- 리팩터링이 필요한 이유는 이러한 변경때문이다. 잘 작동하고 나중에 변경할 일이 없다면 그대로 두면 된다.

## 1.3 리팩터링의 첫 단계

- 리팩터링하기 전에 제대로 된 테스트부터 마련한다. 테스트는 반드시 자가진단하도록 만든다.

## 1.4 statement() 함수 쪼개기

- 리팩터링할 때는 먼저 전체 동작을 각각의 부분으로 나눌 수 있는 지점을 찾기
- 워드 커닝햄이 말하길, 눈 대중으로 찾은 정보는 휘발성이 높기로 악명 높은 머릿속에 저장되므로, 잊지 않으려면 재빨리 코드에 반영해야한다.
- 수정하고 나면 곧바로 컴파일하고 테스트해서 실수한 게 없는지 확인한다.
- 이처럼 조금씩 변경하고 매번 테스트하는 것이 리팩터링 절차의 핵심이다.
- 리팩터링은 프로그램 수정을 작은 단계로 나눠 진행한다. 그래서 중간에 실수하더라도 버그를 쉽게 찾을 수 있다.
- 컴퓨터가 이해하는 코드는 바보도 작성할 수 있다. 사람이 이해하도록 작성하는 프로그래머가 진정한 실력자다.

## 1.10 마치며

- 좋은 코드를 가늠하는 확실한 방법은 '얼마나 수정하기 쉬운가' 이다.
